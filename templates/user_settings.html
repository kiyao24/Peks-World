{% extends "base.html" %}
{% block title %}User Settings{% endblock %}

{% block content %}
<section class="max-w-3xl mx-auto mt-6 bg-white p-6 rounded shadow">
  <div class="flex items-center gap-4 mb-6">
    <img src="{{ url_for('static', filename= 'img/profile.jpg') }}" alt="Avatar"
         class="w-16 h-16 rounded-full border border-gray-300 object-cover">
    <div>
      <h2 class="text-xl font-bold text-pink-700">{{ current_user.username }}</h2>
      <p class="text-sm text-gray-500">{{ current_user.email }}</p>
    </div>
  </div>

  <h3 class="text-lg font-semibold text-gray-800 mb-2">Notifications</h3>
    {% if notifications %}
    <ul class="space-y-2 mb-4">
        {% for note in notifications %}
        <li class="p-3 bg-{{ 'gray-100' if note.read else 'yellow-100' }} rounded shadow-sm flex justify-between items-center">
            <span>{{ note.message }}</span>
            <div class="flex gap-2">
            {% if not note.read %}
                <a href="{{ url_for('settings.mark_notification_read', note_id=note.id) }}"
                class="text-sm text-blue-600 hover:underline">Mark as read</a>
            {% endif %}
            <a href="{{ url_for('settings.delete_notification', note_id=note.id) }}"
                class="text-sm text-red-600 hover:underline"
                onclick="return confirm('Are you sure you want to delete this notification?')">Delete</a>
            </div>
        </li>
        {% endfor %}
    </ul>
    {% else %}
        <p class="text-sm text-gray-500">No notifications at this time.</p>
    {% endif %}


  <hr class="my-4">

  <div class="flex flex-col gap-2">
    <a href="{{ url_for('user.dashboard') }}"
       class="inline-block px-4 py-2 rounded bg-pink-100 text-pink-700 hover:bg-pink-200">Edit Profile</a>
    <a href="{{ url_for('change_password') }}"
       class="inline-block px-4 py-2 rounded bg-gray-100 text-gray-700 hover:bg-gray-200">Change Password</a>
  </div>
</section>
{% endblock %}
